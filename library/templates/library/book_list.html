{% extends "base.html" %}
{% load static %}

{% block content %}
<h1 class="mb-4 text-center">书目</h1>
<div class="row row-cols-1 row-cols-md-3 g-4">
    {% for book in books %}
    <div class="col">
        <div class="card h-100 shadow" style="width: 18rem;">
            <!-- 图片容器（固定A4比例 1:1.414） -->
            <div style="aspect-ratio: 1/1.414; overflow: hidden; display: flex; justify-content: center; align-items: center; background: #f5f5f5;">
                <img 
                    src="{{ book.cover_image.url }}"
                    style="
                        max-width: 100%;
                        max-height: 100%;
                        object-fit: contain;  <!-- 关键修改：contain代替cover -->
                        width: auto;
                        height: auto;
                    "
                    alt="{{ book.title }}"
                >
            </div>
            <div class="card-body">
                <h5 class="card-title">{{ book.title }}</h5>
                <h6 class="card-subtitle mb-2 text-muted">{{ book.author }}</h6>
                <a href="{% url 'book_detail' book.id %}" class="btn btn-primary mt-auto">查看详情</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}